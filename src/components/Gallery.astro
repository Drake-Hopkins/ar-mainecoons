---
const API_KEY = import.meta.env.PUBLIC_GOOGLE_API_KEY;
const PARENT_ID = import.meta.env.PUBLIC_DRIVE_PARENT_FOLDER_ID;

if (!API_KEY || !PARENT_ID) {
  console.warn("Missing PUBLIC_GOOGLE_API_KEY or PUBLIC_DRIVE_PARENT_FOLDER_ID");
}
---

<div class="bg-base-content py-20 lg:px-40">
  <section
    id="gallery"
    data-api-key={API_KEY}
    data-parent-id={PARENT_ID}
    class="relative"
  >
    <!-- Header / status -->
    <div id="gallery-status" class="text-center text-base-100 mb-6">Loading images…</div>

    <!-- Grid gets populated by JS -->
    <div
      id="gallery-grid"
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 p-4"
    ></div>

    <!-- Lightbox -->
    <div
      id="lightbox"
      class="fixed z-50 inset-0 bg-black/80 hidden items-center justify-center p-4"
      tabindex="-1"
      aria-modal="true"
      role="dialog"
    >
      <div class="relative w-full max-w-6xl">
        <!-- Close -->
        <button
          id="lightbox-close"
          class="absolute -top-3 -right-3 z-10 btn btn-circle btn-sm bg-white/90 text-gray-900 border-none shadow-lg hover:bg-white"
          aria-label="Close"
          title="Close"
        >
          ✕
        </button>
        <!-- Images injected here -->
        <div id="lightbox-stage" class="w-full h-auto"></div>
      </div>
    </div>
  </section>
</div>

<!-- Load our client script from /public -->
<script type="module" src="/js/gallery.js?v=5"></script>